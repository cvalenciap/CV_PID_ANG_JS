"use strict";var env={};window&&Object.assign(env,window.__env);var app=angular.module("PideWeb",["ui.bootstrap","ui.router","ui.router.state.events","ngStorage","ngTable","ui.validate","angular-spinkit","ui.utils"]);app.constants={backend_path:env.backend_path},app.help_messages=env.help_messages,app.config(["$stateProvider","$urlRouterProvider","$httpProvider","$qProvider",function(t,a,e,s){var o=routingConfig.accessLevels;t.state("anon",{abstract:!0,template:"<ui-view/>",data:{access:o.anon}}).state("anon.login",{url:"/",templateUrl:"templates/login.html"}),t.state("common",{abstract:!0,template:"<ui-view/>",data:{access:o.common}}).state("common.dashboard",{url:"/home",templateUrl:"templates/dashboard.html"}).state("common.consultaDni",{url:"/consultasDni",templateUrl:"templates/consultas/consultasDni.html"}).state("common.consultaRuc",{url:"/consultaRuc",templateUrl:"templates/consultas/consultaRuc.html"}).state("common.consultaTitularidad",{url:"/consultaTitularidad",templateUrl:"templates/consultas/consultaTitularidad.html"}).state("common.consultaListaAsientos",{url:"/consultaListaAsientos",templateUrl:"templates/consultas/consultaListaAsientos.html"}).state("common.auditoriaRegistro",{url:"/auditoriaRegistro",templateUrl:"templates/auditorias/auditoriaRegistro.html"}).state("common.auditoriaResumen",{url:"/auditoriaResumen",templateUrl:"templates/auditorias/auditoriaResumen.html"}).state("common.actualizarCredencial",{url:"/actualizarCredencial",templateUrl:"templates/consultas/actualizarCredencial.html"}),a.otherwise(function(t,a){t.get("$state").transitionTo("common.dashboard",null,{location:!1})}),e.interceptors.push(["$q","$location",function(t,a){return{responseError:function(e){var s=a.path();return 401!==e.status&&403!==e.status&&302!==e.status||"/"===s?t.reject(e):(alert("Session expirada!"),sessionStorage.clear(),window.location.href="/",t.reject(e))}}}]),s.errorOnUnhandledRejections(!1)}]),app.run(["$q","$rootScope","$timeout","$state","Auth",function(t,a,e,s,o){a.help_messages=app.help_messages,a.$on("$stateChangeStart",function(t,n){o.authorize(n.data.access)||(a.error="No tienes los permisos suficientes para esta opción.",e(function(){a.error=null},4e3),t.preventDefault(),o.isLoggedIn()?s.go("common.dashboard"):s.go("anon.login"))})}]);
!function(r){var o=["public","personal","admin"],e={public:"*",anon:["public"],common:["admin","personal"],admin:["admin"],personal:["personal"]};r.userRoles=function(r){var o="01",e={};for(var n in r){var s=parseInt(o,2);e[r[n]]={bitMask:s,title:r[n]},o=(s<<1).toString(2)}return e}(o),r.accessLevels=function(r,o){var e={};for(var n in r)if("string"==typeof r[n])if("*"==r[n]){var s="";for(var i in o)s+="1";e[n]={bitMask:parseInt(s,2)}}else console.log("Access Control Error: Could not parse '"+r[n]+"' as access definition for level '"+n+"'");else{s=0;for(var i in r[n])o.hasOwnProperty(r[n][i])?s|=o[r[n][i]].bitMask:console.log("Access Control Error: Could not find role '"+r[n][i]+"' in registered roles while building access for '"+n+"'");e[n]={bitMask:s}}return e}(e,r.userRoles)}("undefined"==typeof exports?this.routingConfig={}:exports);
"use strict";var functionUtil=function(n){var r={},t=function(n,r){l("danger",n,r)},i=function(n,r){l("warning",n,r)},o=function(n,r){l("info",n,r)},l=function(n,t,i){u(),r.scope.alerts.push({type:n,msg:t}),null!=i&&void 0!=i&&i&&a()},e=function(n){r.scope.alerts.splice(n,1)},u=function(){r.scope.alerts=[]},a=function(){n(function(){u()},3e3)},c=function(n){var t=r.scope.$$childTail[n];null!=t&&void 0!=t&&(t.$setPristine(),t.$valid=!1)},f=function(n,t,i){var o=r.scope.$$childTail[n];if(null!=o&&void 0!=o){null!=i&&void 0!=i||(i="validator");var l=o.$error;if(null==l||void 0==l)return;var e=l[i];if(null==e||void 0==e)return;if(0==e.length)return;var u=!1;return angular.forEach(e,function(n){null!=n[t]&&(u=!0)}),u}},s=function(n,r){if(null==n||void 0==n)return"";var t="Registros";if(null!=r&&void 0!=r&&(t=r),n.total()>0){var i=n.page(),o=n.count(),l=1,e=1,u=n.total();return u<=o?e=u:(1!=i&&(l=(i-1)*o+1),(e=i*o)>u&&(e=u)),l+"-"+e+" de "+u+" "+t}return"0-0 de 0 "+t};return r.registrarFuncionesManejoAlertas=function(n){null!=n&&(r.scope=n,n.addErrorAlert=t,n.addInfoAlert=o,n.addWarningAlert=i,n.closeErrorAlert=e,n.limpiarAlertas=u)},r.registrarFuncionesFormulario=function(n){n.resetearInputsFormulario=c,n.getErrorFromInputForm=f,n.contadorTabla=s},r};app.factory("FunctionUtil",["$timeout",functionUtil]);
"use strict";var getDetalleTitularidadDatosUtil=function(){var a={};return a.obtenerOficinaYZona=function(a){var i={oficina:"0",zona:"0"};return"LIMA"===a?i={oficina:"01",zona:"01"}:"CALLAO"===a?i={oficina:"02",zona:"01"}:"HUARAL"===a?i={oficina:"03",zona:"01"}:"HUACHO"===a?i={oficina:"04",zona:"01"}:"CAÑETE"===a?i={oficina:"05",zona:"01"}:"BARRANCA"===a?i={oficina:"06",zona:"01"}:"HUANCAYO"===a?i={oficina:"01",zona:"02"}:"HUANUCO"===a?i={oficina:"02",zona:"02"}:"PASCO"===a?i={oficina:"04",zona:"02"}:"SATIPO"===a?i={oficina:"05",zona:"02"}:"LA MERCED"===a?i={oficina:"06",zona:"02"}:"TARMA"===a?i={oficina:"07",zona:"02"}:"TINGO MARIA"===a?i={oficina:"08",zona:"02"}:"HUANCAVELICA"===a?i={oficina:"09",zona:"02"}:"AREQUIPA"===a?i={oficina:"01",zona:"03"}:"CAMANA"===a?i={oficina:"02",zona:"03"}:"CASTILLA - APLAO"===a?i={oficina:"03",zona:"03"}:"ISLAY - MOLLENDO"===a?i={oficina:"04",zona:"03"}:"HUARAZ"===a?i={oficina:"01",zona:"04"}:"CASMA"===a?i={oficina:"02",zona:"04"}:"CHIMBOTE"===a?i={oficina:"03",zona:"04"}:"PIURA"===a?i={oficina:"01",zona:"05"}:"SULLANA"===a?i={oficina:"02",zona:"05"}:"TUMBES"===a?i={oficina:"03",zona:"05"}:"CUSCO"===a?i={oficina:"01",zona:"06"}:"ABANCAY"===a?i={oficina:"02",zona:"06"}:"MADRE DE DIOS"===a?i={oficina:"03",zona:"06"}:"QUILLABAMBA"===a?i={oficina:"04",zona:"06"}:"SICUANI"===a?i={oficina:"05",zona:"06"}:"ESPINAR"===a?i={oficina:"06",zona:"06"}:"ANDAHUAYLAS"===a?i={oficina:"07",zona:"06"}:"TACNA"===a?i={oficina:"01",zona:"07"}:"ILO"===a?i={oficina:"02",zona:"07"}:"JULIACA"===a?i={oficina:"03",zona:"07"}:"MOQUEGUA"===a?i={oficina:"04",zona:"07"}:"PUNO"===a?i={oficina:"05",zona:"07"}:"TRUJILLO"===a?i={oficina:"01",zona:"08"}:"CHEPEN"===a?i={oficina:"02",zona:"08"}:"HUAMACHUCO"===a?i={oficina:"03",zona:"08"}:"OTUZCO"===a?i={oficina:"04",zona:"08"}:"SAN PEDRO"===a?i={oficina:"05",zona:"08"}:"MAYNAS"===a?i={oficina:"01",zona:"09"}:"ICA"===a?i={oficina:"01",zona:"10"}:"CHINCHA"===a?i={oficina:"02",zona:"10"}:"PISCO"===a?i={oficina:"03",zona:"10"}:"NAZCA"===a?i={oficina:"04",zona:"10"}:"CHICLAYO"===a?i={oficina:"01",zona:"11"}:"CAJAMARCA"===a?i={oficina:"02",zona:"11"}:"JAEN"===a?i={oficina:"03",zona:"11"}:"BAGUA"===a?i={oficina:"04",zona:"11"}:"CHACHAPOYAS"===a?i={oficina:"05",zona:"11"}:"CHOTA"===a?i={oficina:"06",zona:"11"}:"MOYOBAMBA"===a?i={oficina:"01",zona:"12"}:"TARAPOTO"===a?i={oficina:"02",zona:"12"}:"JUANJUI"===a?i={oficina:"03",zona:"12"}:"YURIMAGUAS"===a?i={oficina:"04",zona:"12"}:"PUCALLPA"===a?i={oficina:"01",zona:"13"}:"AYACUCHO"===a?i={oficina:"01",zona:"14"}:"HUANTA"===a&&(i={oficina:"02",zona:"14"}),i},a.obtenerRegistro=function(a){return"REGISTRO DE PROPIEDAD INMUEBLE"===a?"21000":"REGISTRO DE PERSONAS JURIDICAS"===a?"22000":"REGISTRO DE PERSONAS NATURALES"===a?"23000":"REGISTRO DE BIENES MUEBLES"===a?"24000":"0"},a.obtenerNombreRegistro=function(a){return"21000"===a?"REGISTRO DE PROPIEDAD INMUEBLE":"22000"===a?"REGISTRO DE PERSONAS JURIDICAS":"23000"===a?"REGISTRO DE PERSONAS NATURALES":"24000"===a?"REGISTRO DE BIENES MUEBLES":""},a};app.factory("GetDetalleTitularidadDatosUtil",[getDetalleTitularidadDatosUtil]);
"use strict";var getOpcionesMenuUtil=function(){var o={},n={CONDNI:{nombre:"Consulta DNI",ruta:"common.consultaDni",opcion:"CON"},CONRUC:{nombre:"Consulta RUC",ruta:"common.consultaRuc",opcion:"CON"},CONTIDO:{nombre:"Titularidad de Dominio",ruta:"common.consultaTitularidad",opcion:"CON"},CONASI:{nombre:"Lista de Asientos",ruta:"common.consultaListaAsientos",opcion:"CON"},REGLOG:{nombre:"Registro de Logs",ruta:"common.auditoriaRegistro",opcion:"LOG"},RESULOG:{nombre:"Resumen de Logs",ruta:"common.auditoriaResumen",opcion:"LOG"},CONACTCRED:{nombre:"Actualizar Credenciales",ruta:"common.actualizarCredencial",opcion:"CON"}};return o.obteneOpcion=function(o){return n[o]},o};app.factory("GetOpcionesMenuUtil",[getOpcionesMenuUtil]);
"use strict";var tokenRestManager=function(e){var t={};return t.setCookieRest=function(t){e["token-pide"]=t},t.cookieRest=function(){return e["token-pide"]},t.cookieUser=function(){return e.user},t.cookieViews=function(){return e.views},t.cleanStorage=function(){delete e["token-pide"],delete e.user},t.setCookieUser=function(t){e.user=t},t.setCookieCredentials=function(t){e.credential=t},t.setCookieViews=function(t){e.views=t},t.cookieCredentials=function(){return e.credential},t.paramNameCookieRest=function(){return"Authenticate"},t};app.factory("TokenRestManager",["$sessionStorage",tokenRestManager]);
"use strict";var validatorUtil=function(){var t={};return t.isPeriodoFormat=function(t){if(null==t)return!1;if(6!=t.length)return!1;var n=parseInt(t.substring(0,2)),r=parseInt(t.substring(2,6));return!(n<1||n>12)&&!(r<2e3)},t.isRucFormat=function(t){return/^\d{11}$/.test(t)},t.isDNIFormat=function(t){return/^\d{8}$/.test(t)},t.isEmailFormat=function(t,n){var r=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(t);return null==n||void 0==n?r:n?r||""==t:r},t.cleanInput=function(t){return null!=t&&void 0!=t?t.trim():""},t.isNoSelected=function(t,n){return!(void 0==n||null==n||!n)||(void 0==t||null==t||-1!=t)},t.isValidValue=function(t){return null!=t&&void 0!==t},t.isCredFormat=function(t){return null!=t&&void 0!==t&&""!=t},t};app.factory("ValidatorUtil",[validatorUtil]);
"use strict";var auditoriasService=function(t,a){var e={},o=function(t){return t};return e.getResumenLogs=function(e){a.paramNameCookieRest();var n={};return n.date=e,t({method:"POST",url:app.constants.backend_path+"auditoria/resumenConsultas",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:a.cookieRest()},data:n}).then(o)},e.getRegistroLogs=function(e,n){a.paramNameCookieRest();var r={};return r.startDate=e,r.endDate=n,t({method:"POST",url:app.constants.backend_path+"auditoria/registroConsultas",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:a.cookieRest()},data:r}).then(o)},e};app.factory("AuditoriasService",["$http","TokenRestManager",auditoriasService]);
"use strict";var consultasService=function(t,a){var e={},n=function(t){return t};return e.getByRuc=function(e){a.paramNameCookieRest();var o={};return o.ruc=e,t({method:"POST",url:app.constants.backend_path+"consultas/getByRuc",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:a.cookieRest()},data:o}).then(n)},e.getByDni=function(e,o){a.paramNameCookieRest();var c={};return c.dni=e,c.user=o,t({method:"POST",url:app.constants.backend_path+"consultas/getByDni",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:a.cookieRest()},data:c}).then(n)},e.actNewCred=function(e,o,c){a.paramNameCookieRest();var i={};return i.user=e,i.cred_act=o,i.cred_new=c,t({method:"POST",url:app.constants.backend_path+"consultas/actNewCred",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:a.cookieRest()},data:i}).then(n)},e.getTitularidad=function(e,o,c,i,r){a.paramNameCookieRest();var s={};return s.tipo=e,s.nombre=o,s.apPaterno=c,s.apMaterno=i,s.razonSocial=r,t({method:"POST",url:app.constants.backend_path+"consultas/getTitularidad",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:a.cookieRest()},data:s}).then(n)},e.getDetalleTitularidad=function(e,o,c,i){a.paramNameCookieRest();var r={};return r.zona=e,r.oficina=o,r.partida=c,r.registro=i,t({method:"POST",url:app.constants.backend_path+"consultas/getAsientosTitularidad",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:a.cookieRest()},data:r}).then(n)},e.getVigencia=function(e,o,c,i,r,s){a.paramNameCookieRest();var p={};return p.transaccion=e,p.id_img=o,p.tipo=c,p.total_pag=i,p.pag_ref=r,p.nro_pag=s,t({method:"POST",url:app.constants.backend_path+"consultas/getVigencia",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:a.cookieRest()},data:p}).then(n)},e.getOficinas=function(){return t({method:"POST",url:app.constants.backend_path+"consultas/getOficinas",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:a.cookieRest()}}).then(n)},e};app.factory("ConsultasService",["$http","TokenRestManager",consultasService]);
"use strict";var loginService=function(e,n,t,o,a,r,i){var c={},s=routingConfig.accessLevels,u=routingConfig.userRoles,l=i.cookieUser()||{username:"Invitado",role:u.public};c.accessLevels=s,c.userRoles=u,c.user=l;var p=function(e){return e};return c.changeUser=function(e){!function(e){i.setCookieUser(e),angular.copy(e,l)}(e)},c.authorize=function(e,n){return void 0===n&&(n=l.role),e.bitMask&n.bitMask},c.isLoggedIn=function(e){var n=!1,t=!0;return void 0===e&&(e=l),angular.forEach(u,function(o){t&&e.role.title==o.title&&"public"!=o.title&&(n=!0,t=!1)}),n},c.callLogin=function(t,o){var a={};return a.user=t,a.pass=o,n.usuario=t,e({method:"POST",url:app.constants.backend_path+"autenticacion/login",headers:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json; charset=UTF-8"},data:a}).then(p)},c.callLogout=function(){i.cleanStorage()},c.generateRoleFromTipo=function(e){return"ADM"==e?u.admin:u.personal},c.deleteLocalCredentials=function(){i.cleanStorage()},c.callRecoveryPassword=function(n){var t={};return t.email=n,e({method:"POST",url:app.constants.backend_path+"autenticacion/recoveryPass",headers:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json; charset=UTF-8"},data:t}).then(p)},c};app.factory("Auth",["$http","$rootScope","$q","$window","$timeout","$location","TokenRestManager",loginService]);
"use strict";var webservicesService=function(e,t){var a={},n=function(e){return e};return a.verificarWsRuc=function(){return e({method:"POST",url:app.constants.backend_path+"webservices/verificarWsRuc",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}}).then(n)},a.verificarWsDni=function(){return e({method:"POST",url:app.constants.backend_path+"webservices/verificarWsDni",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}}).then(n)},a.verificarWsTitularidad=function(){return e({method:"POST",url:app.constants.backend_path+"webservices/verificarWsTitularidad",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}}).then(n)},a.verificarWsDetalleTitularidad=function(){return e({method:"POST",url:app.constants.backend_path+"webservices/verificarWsDetalleTitularidad",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}}).then(n)},a.verificarWsVigencia=function(){return e({method:"POST",url:app.constants.backend_path+"webservices/verificarWsVigencia",headers:{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}}).then(n)},a};app.factory("WebservicesService",["$http","TokenRestManager",webservicesService]);
"use strict";var accessLevel=function(s){return{restrict:"A",link:function(e,c,i){function n(){a&&r&&(s.authorize(r,a)?"none"!=c.css("display")&&""!=l?c.css("display",l):c.css("display","block"):c.css("display","none"))}var a,r,l=c.css("display");e.user=s.user,e.$watch("user",function(s){s.role&&(a=s.role),n()},!0),i.$observe("accessLevel",function(s){s&&(r=e.$eval(s)),n()})}}};app.directive("accessLevel",["Auth",accessLevel]);
"use strict";var ngConfirmClick=function(){return{link:function(i,n,e){var r=e.ngConfirmClick||"Esta seguro de querer eliminar este elemento?",c=e.confirmedClick;n.bind("click",function(n){window.confirm(r)&&i.$eval(c)})}}};app.directive("ngConfirmClick",ngConfirmClick);
"use strict";var cleanOnBlur=function(n){return{restrict:"A",require:"ngModel",link:function(e,i,l,r){if("radio"!==l.type&&"checkbox"!==l.type){var t=null;i.bind("focus",function(){e.$apply(function(){t=i.val()})}),i.bind("blur",function(){e.$apply(function(){var e=i.val();e!=t&&(r.$setViewValue(n.cleanInput(e)),r.$render())})})}}}};app.directive("ngCleanOnBlur",["ValidatorUtil",cleanOnBlur]);
function rdLoading(){return{restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'}}angular.module("PideWeb").directive("rdLoading",rdLoading);
"use strict";var validationFormGroup=function(){return{restrict:"C",require:"?form",link:function(r,e,t,o){o&&(r.$watch(function(){return o.$valid},function(r){e[0].querySelector(".ng-dirty")&&(r?e.removeClass("has-error"):e.addClass("has-error"))}),r.$watch(function(){return o.$pristine},function(r){r&&e.removeClass("has-error")}),r.$watch(function(){return o.$dirty},function(r){var t=o.$valid;e[0].querySelector(".ng-dirty")&&(t?e.removeClass("has-error"):e.addClass("has-error"))}))}}};app.directive("formGroup",[validationFormGroup]);
function rdWidgetBody(){return{requires:"^rdWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"}}angular.module("PideWeb").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){return{requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"}}angular.module("PideWeb").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){return{requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"}}angular.module("PideWeb").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){return{transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"}}angular.module("PideWeb").directive("rdWidget",rdWidget);
"use strict";function ActCredCtrl(a,e,r,n,t,i){a.actualizarCred=function(){a.limpiarAlertas(),a.loading=!0,a.searching=!1,a.haveResult=!1,r.isCredFormat(a.cred_act)&&r.isCredFormat(a.cred_new)?a.cred_new===a.conf_cred_new?t.actNewCred(e.user.username,a.cred_act,a.cred_new).then(function(e){a.loading=!1;var r=e.data.message;if(1==e.data.status){a.searching=!0;0!=e.data.data.length?(a.haveResult=!0,a.addInfoAlert(r,!1)):(a.haveResult=!1,a.addWarningAlert(r,!1),a.limpiarInputs())}else a.searching=!1,a.haveResult=!1,a.addErrorAlert(r,!1),a.limpiarInputs()}).catch(function(e){a.loading=!1,a.searching=!1,a.haveResult=!1,a.limpiarInputs(),a.addErrorAlert("Error al realizar la operacion actualizar credenciales.",!1)}):(a.loading=!1,a.searching=!1,a.haveResult=!1,a.limpiarInputs(),a.addErrorAlert("El ingreso de la nueva credencial no coincide con la confirmacion",!1)):(a.loading=!1,a.searching=!1,a.haveResult=!1,r.isCredFormat(a.cred_act)||a.addErrorAlert("Credencial actual ingresada no valida",!1),r.isCredFormat(a.cred_new)||a.addErrorAlert("Credencial nueva ingresada no valida",!1))};var s=function(){i.verificarWsDni().then(function(e){console.log(e.data),a.showFlag=!0,1===e.data.status?(a.wsWorks=e.data.data,a.wsWorksMessage=e.data.message):a.wsWorks=!1}).catch(function(e){a.showFlag=!0,a.wsWorks=!1})};a.limpiarInputs=function(){a.cred_act="",a.cred_new="",a.conf_cred_new=""},a.result={},a.searching=!1,a.haveResult=!1,a.loading=!1,a.showFlag=!1,a.wsWorks=!1,a.cred_act="",a.cred_new="",a.conf_cred_new="",a.wsWorksMessage="El servicio no se encuentra habilitado por ahora",n.registrarFuncionesManejoAlertas(a),a.limpiarAlertas(),a.changeViewTitle("Actualizar Credenciales"),s()}app.controller("ActCredCtrl",["$scope","Auth","ValidatorUtil","FunctionUtil","ConsultasService","WebservicesService",ActCredCtrl]);
"use strict";function AuditRegistroCtrl(e,a,i,n){e.consultarRegistroLogs=function(){e.limpiarAlertas(),e.loading=!0,e.searching=!1,e.haveResult=!1,null!=e.fechaInicio&&null!=e.fechaFin&&void 0!==e.fechaInicio&&void 0!==e.fechaFin?n.getRegistroLogs(e.fechaInicio,e.fechaFin).then(function(a){e.loading=!1,1==a.data.status?(e.searching=!0,e.results=a.data.data,e.haveResult=0!==e.results.length,e.haveResult?(e.currentPage=1,e.getDataInPage(),e.addInfoAlert("Se encontraron "+e.results.length+" resultado(s)",!1)):e.addWarningAlert("No se encontraron resultados",!1)):(e.searching=!1,e.haveResult=!1,e.addErrorAlert("Hubo un error en el resultado de la consulta.",!1))}).catch(function(a){e.loading=!1,e.searching=!1,e.haveResult=!1,e.addErrorAlert("Error al realizar la consulta.",!1)}):(e.loading=!1,e.searching=!1,e.haveResult=!1,null==e.fechaInicio||void 0===e.fechaInicio?e.addErrorAlert("Fecha de inicio no válida",!1):null!=e.fechaFin&&void 0!==e.fechaFin||e.addErrorAlert("Fecha de fin no válida",!1))},e.validarFechaInicio=function(){null!=e.fechaFin&&void 0!==e.fechaFin&&e.fechaFin<e.fechaInicio?(e.addErrorAlert("La fecha de inicio no puede ser mayor a la fecha de fin.",!1),e.fechaInicio=null):e.limpiarAlertas()},e.validarFechaFin=function(){null!=e.fechaInicio&&void 0!==e.fechaInicio&&e.fechaFin<e.fechaInicio?(e.addErrorAlert("La fecha de fin no puede ser menor a la fecha de inicio.",!1),e.fechaFin=null):e.limpiarAlertas()},e.$watch("currentPage + numPerPage",function(){e.getDataInPage()}),e.getDataInPage=function(){var a=(e.currentPage-1)*e.numPerPage,i=a+e.numPerPage;e.filterResults=e.results.slice(a,i)},e.exportExcel=function(){var a="RegistroAuditorias_"+(e.fechaInicio.getDay()+"_"+e.fechaInicio.getMonth()+"_"+e.fechaInicio.getFullYear()+"-"+e.fechaFin.getDay()+"_"+e.fechaFin.getMonth()+"_"+e.fechaFin.getFullYear())+".xls",i=new Blob([document.getElementById("export-table-registro").innerHTML],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"});saveAs(i,a)},e.results=[],e.filterResults=[],e.searching=!1,e.haveResult=!1,e.loading=!1,e.currentPage=1,e.numPerPage=10,e.maxSize=5,e.fechaInicio=new Date,e.fechaFin=new Date,e.dateOptions={formatYear:"yy",startingDay:1},i.registrarFuncionesManejoAlertas(e),e.limpiarAlertas(),e.changeViewTitle("Registro de Logs")}app.controller("AuditRegistroCtrl",["$scope","ValidatorUtil","FunctionUtil","AuditoriasService",AuditRegistroCtrl]);
"use strict";function AuditResumenCtrl(e,t,a){e.consultarResumenLogs=function(){e.limpiarAlertas(),e.loading=!0,e.searching=!1,e.haveResult=!1,null!=e.monthYear&&null!=e.monthYear?a.getResumenLogs(e.monthYear).then(function(t){if(e.loading=!1,1==t.data.status){e.searching=!0,e.results=t.data.data,e.haveResult=!0;for(var a=0,r=0;r<e.results.length;r++){a+=e.results[r].cantidad_consultas}0!==a?e.addInfoAlert("Se encontraron "+a+" resultado(s)",!1):e.addWarningAlert("No se encontraron resultados",!1)}else e.searching=!1,e.haveResult=!1,e.addErrorAlert("Hubo un error en el resultado de la consulta.",!1)}).catch(function(t){e.loading=!1,e.searching=!1,e.haveResult=!1,e.addErrorAlert("Error al realizar la consulta.",!1)}):(e.loading=!1,e.searching=!1,e.haveResult=!1,e.addErrorAlert("La fecha ingresada no es válido",!1))},e.exportExcel=function(){var t="ResumenAuditorias_"+(e.monthYear.getMonth()+"_"+e.monthYear.getFullYear())+".xls",a=new Blob([document.getElementById("export-table-resumen").innerHTML],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"});saveAs(a,t)},e.results=[],e.searching=!1,e.haveResult=!1,e.loading=!1,e.monthYear=new Date,t.registrarFuncionesManejoAlertas(e),e.limpiarAlertas(),e.changeViewTitle("Resumen de Logs")}app.controller("AuditResumenCtrl",["$scope","FunctionUtil","AuditoriasService",AuditResumenCtrl]);
"use strict";function ConsDniCtrl(t,e,a,n,o,r,s,i){t.consultarDni=function(){t.limpiarAlertas(),a.isDNIFormat(t.dni)?(t.loading=!0,t.searching=!1,t.haveResult=!1,o.getByDni(t.dni,e.user.username).then(function(e){t.loading=!1;var a=e.data.message;if(1==e.data.status){t.searching=!0;var n=e.data.data;0!=n.length?(t.addInfoAlert(a,!1),t.haveResult=!0,t.result=n[0]):(t.addWarningAlert(a,!1),t.haveResult=!1)}else t.searching=!1,t.haveResult=!1,t.addErrorAlert(a,!1)}).catch(function(e){t.loading=!1,t.searching=!1,t.haveResult=!1,t.addErrorAlert("Error al realizar la consulta.",!1)})):(t.loading=!1,t.searching=!1,t.haveResult=!1,t.addErrorAlert("DNI de consulta no válido",!1))};var l=function(){r.verificarWsDni().then(function(e){console.log(e.data),t.showFlag=!0,1===e.data.status?(t.wsWorks=e.data.data,t.wsWorksMessage=e.data.message):t.wsWorks=!1}).catch(function(e){t.showFlag=!0,t.wsWorks=!1})};t.exportPdf=function(){var a=new jsPDF("p","pt","a4"),n=(new Date).toLocaleString(),o="data:image/jpeg;base64,"+s("bytetobase")(t.result.foto);o="data:image/jpeg;base64,"+t.result.foto;a.setFontSize(12),a.setFontType("bold"),a.text("CONSULTA DE DNI - PIDE+",221,55,null,null,"center"),a.setFontSize(11),a.setFontType("normal"),a.text("DNI de consulta: ",90,90),a.text(t.dni.toString(),205,90),a.text("Fecha de exportacion: ",90,105),a.text(n,205,105),a.text("Usuario: ",90,120),a.text(e.user.username,205,120),a.setFontSize(12),a.setFontType("italic"),a.text("RESULTADO:",90,145),a.setFontSize(10),a.setFontType("normal"),a.addImage(o,"JPEG",385,130,120,160),a.text("Apellido Paterno",90,325),a.text("Apellido Materno",90,340),a.text("Nombres",90,310),a.text("Estado Civil",90,355),a.text("Ubigeo",90,370),a.text("Dirección",90,385),a.text("Restricción",90,400),a.setFontSize(8),a.setFontType("normal"),a.text(t.result.apPaterno,205,325),a.text(t.result.apMaterno,205,340),a.text(t.result.preNombres,205,310),a.text(t.result.estCivil,205,355),a.text(t.result.ubigeo,205,370),a.text(t.result.direccion,205,385),a.text(t.result.restriccion,205,400),a.line(195,295,195,403),a.line(85,313,505,313),a.line(85,328,505,328),a.line(85,343,505,343),a.line(85,358,505,358),a.line(85,373,505,373),a.line(85,388,505,388),a.rect(85,295,420,108);var r="consulta_dni_"+n+".pdf";a.save(r)},t.limpiarConsulta=function(){t.searching=!1,t.haveResult=!1,t.loading=!1,t.dni="",t.result={},t.limpiarAlertas()},t.consultarFoto=function(e){t.resultImage=e,t.showFotoModal(t.resultImage)},t.showFotoModal=function(t){i.open({animation:!0,templateUrl:"mostrarFoto.html",controller:["$scope","$uibModalInstance",function(e,a){e.urlFoto="data:image/JPEG;base64,"+t,e.ok=function(){a.close()},e.cancel=function(){a.dismiss("cancel")}}]})},t.result={},t.searching=!1,t.haveResult=!1,t.loading=!1,t.showFlag=!1,t.wsWorks=!1,t.wsWorksMessage="El servicio no se encuentra habilitado por ahora",n.registrarFuncionesManejoAlertas(t),t.limpiarAlertas(),t.changeViewTitle("Consulta Dni"),l()}app.controller("ConsDniCtrl",["$scope","Auth","ValidatorUtil","FunctionUtil","ConsultasService","WebservicesService","$filter","$uibModal",ConsDniCtrl]),app.filter("bytetobase",function(){return function(t){for(var e="",a=new Uint8Array(t),n=a.byteLength,o=0;o<n;o++)e+=String.fromCharCode(a[o]);return window.btoa(e)}});
"use strict";function ConsListaAsientosCtrl(a,e,t,i,o,n,r,s,l,c){t.consultarListaAsientos=function(){t.limpiarAlertas(),t.loading=!0,t.searching=!1,t.haveResult=!1,console.log(t.office),n.isValidValue(t.partida)&&"00"!=t.office.codOficinaField&&"0"!==t.registro?(t.zona=t.office.codZonaField,t.oficina=t.office.codOficinaField,t.zona_oficina=t.office.descripcionField,l.getDetalleTitularidad(t.zona,t.oficina,t.partida,t.registro).then(function(a){if(t.loading=!1,1==a.data.status){t.searching=!0;var e=a.data.data;0!==e.length?(t.result=e[0],null!=t.result.total_pag?(t.addInfoAlert("Se encontraron resultados.",!1),t.haveResult=!0):(t.addWarningAlert("No se encontraron resultados",!1),t.haveResult=!1)):(t.addWarningAlert("No se encontraron resultados",!1),t.haveResult=!1)}else t.searching=!1,t.haveResult=!1,t.addErrorAlert("Hubo un error en el resultado de la consulta.",!1)}).catch(function(a){t.loading=!1,t.searching=!1,t.haveResult=!1,t.addErrorAlert("Error al realizar la consulta.",!1)})):(t.loading=!1,t.searching=!1,t.haveResult=!1,n.isValidValue(t.partida)||t.addErrorAlert("Partida ingresada no válida.",!1),"00"===t.office.codOficinaField&&t.addErrorAlert("No se ha especificado la oficina.",!1),"0"===t.registro&&t.addErrorAlert("No se ha especificado el registro.",!1))},t.consultarVigenciaPoder=function(a){t.loadingImage=!0,l.getVigencia(t.result.transaccion,a.id_img,a.tipo,t.result.total_pag,a.pag_ref,a.nro_pag).then(function(a){t.loadingImage=!1,1==a.data.status?(t.resultImage=a.data.data,""!==t.resultImage?t.showVigenciaPoderModal(t.resultImage):t.addWarningAlert("No posee una vigencia de poder",!1)):t.addErrorAlert("Hubo un error en el resultado de la consulta.",!1)}).catch(function(a){t.loadingImage=!1,t.addErrorAlert("Error al realizar la consulta.",!1)})},t.showVigenciaPoderModal=function(e){a.open({animation:!0,templateUrl:"vigenciaPoder.html",controller:["$scope","$uibModalInstance",function(a,t){a.urlVigenciaPoder="data:image/JPEG;base64,"+e,a.ok=function(){t.close()},a.cancel=function(){t.dismiss("cancel")}}]})};var d=function(){c.verificarWsDetalleTitularidad().then(function(a){console.log(a.data),t.showFlag=!0,1===a.data.status?(t.wsWorks=a.data.data,t.wsWorksMessage=a.data.message):t.wsWorks=!1}).catch(function(a){t.showFlag=!0,t.wsWorks=!1})};t.exportPdf=function(){var a=new jsPDF("p","pt","a4"),e=(new Date).toLocaleString(),i=[];a.setFontSize(12),a.setFontType("bold"),a.text("CONSULTA DE LISTA DE ASIENTOS - PIDE+",198,55,null,null,"center"),a.setFontSize(11),a.setFontType("normal"),a.text("Nro Partida: ",60,90),a.text(t.partida.toString(),225,90),a.text("Oficina: ",60,105),a.text(t.zona_oficina,225,105),a.text("Registro: ",60,120),a.text(r.obtenerNombreRegistro(t.registro),225,120),a.text("Fecha de exportacion: ",60,135),a.text(e,225,135),a.text("Usuario: ",60,150),a.text(o.user.username,225,150),a.setFontSize(12),a.setFontType("italic"),a.text("RESULTADO:",60,175),a.setFontSize(10),a.setFontType("normal"),a.text("Nro Transaccion:",60,200),a.text("Total de paginas:",410,200),a.setFontSize(9),a.setFontType("normal"),a.text(t.result.transaccion,205,200),a.text(t.result.total_pag,525,200),angular.forEach(t.result.asientos,function(a){var e={imagenid:a.id_img,pagina:a.nro_pag,tipo:a.tipo,referencia:a.pag_ref};i.push(e)}),a.autoTable([{title:"ID Imagen",key:"imagenid"},{title:"Nro de pagina",key:"pagina"},{title:"Tipo",key:"tipo"},{title:"Pagina de referencia",key:"referencia"}],i,{margins:{horizontal:60,top:220,firstPageTop:220},fontSize:8});var n="consulta_lista_asientos_"+e+".pdf";a.save(n)},t.limpiarConsulta=function(){t.searching=!1,t.haveResult=!1,t.loading=!1,t.zona="",t.oficina="",t.partida="",t.zona_oficina="0",t.registro="0",t.result={},t.limpiarAlertas()};var u=function(){l.getOficinas().then(function(a){1==a.data.status?(t.wsWorks=!0,t.oficinasWs=t.oficinasWs.concat(a.data.data),console.log(t.oficinasWs)):(t.wsWorks=!1,t.addErrorAlert("Hubo un error al cargar las oficinas.",!1))}).catch(function(a){console.log(a),t.wsWorks=!1,t.addErrorAlert("Hubo un error al cargar las oficinas.",!1)})};!function(){t.state=e,t.result={},t.resultImage="http://english.tw/wp-content/themes/qaengine/img/default-thumbnail.jpg",t.oficinasWs=[],t.searching=!1,t.haveResult=!1,t.loading=!1,t.loadingImage=!1,t.showFlag=!1,t.wsWorks=!1,t.wsWorksMessage="El servicio no se encuentra habilitado por ahora",t.zona="",t.oficina="",t.partida="",t.zona_oficina="0";var a={codOficinaField:"00",codZonaField:"00",descripcionField:"---ELIJA UNA OPCIÓN---"};t.oficinasWs.push(a),t.office=a,t.registro="0",s.registrarFuncionesManejoAlertas(t),t.limpiarAlertas(),t.changeViewTitle("Consulta Lista de Asientos"),d(),u()}()}app.controller("ConsListaAsientosCtrl",["$uibModal","$state","$scope","$stateParams","Auth","ValidatorUtil","GetDetalleTitularidadDatosUtil","FunctionUtil","ConsultasService","WebservicesService",ConsListaAsientosCtrl]);
"use strict";function ConsRucCtrl(e,t,a,r,n,o){e.consultarRuc=function(){e.limpiarAlertas(),a.isRucFormat(e.ruc)?(e.loading=!0,e.searching=!1,e.haveResult=!1,n.getByRuc(e.ruc).then(function(t){if(e.loading=!1,1==t.data.status){e.searching=!0;var a=t.data.data;0!=a.length?(e.addInfoAlert("Se encontraron resultados",!1),e.haveResult=!0,e.result=a[0]):(e.addWarningAlert("No se encontraron resultados",!1),e.haveResult=!1)}else e.searching=!1,e.haveResult=!1,e.addErrorAlert("Hubo un error en el resultado de la consulta.",!1)}).catch(function(t){e.loading=!1,e.searching=!1,e.haveResult=!1,e.addErrorAlert("Error al realizar la consulta.",!1)})):(e.loading=!1,e.searching=!1,e.haveResult=!1,e.addErrorAlert("RUC de consulta no válido",!1))};var s=function(){o.verificarWsRuc().then(function(t){console.log(t.data),e.showFlag=!0,1===t.data.status?(e.wsWorks=t.data.data,e.wsWorksMessage=t.data.message):e.wsWorks=!1}).catch(function(t){e.showFlag=!0,e.wsWorks=!1})};e.exportPdf=function(){var a=new jsPDF("l","pt","a4"),r=(new Date).toLocaleString();a.setFontSize(12),a.setFontType("bold"),a.text("CONSULTA DE RUC - PIDE+",321,55,null,null,"center"),a.setFontSize(11),a.setFontType("normal"),a.text("RUC de consulta: ",90,90),a.text(e.ruc.toString(),205,90),a.text("Fecha de exportacion: ",90,105),a.text(r,205,105),a.text("Usuario: ",90,120),a.text(t.user.username,205,120),a.setFontSize(12),a.setFontType("italic"),a.text("RESULTADO:",90,145),a.setFontSize(10),a.setFontType("normal"),a.text("Razon Social",90,170),a.text("RUC",90,185),a.text("Dirección",90,200),a.text("Estado",90,215),a.text("Condicion",90,230),a.text("Teléfono",90,245),a.text("Representante Legal",90,260),a.text("Otros",90,275),a.setFontSize(8),a.setFontType("normal"),a.text(e.result.razon_social,205,170),a.text(e.result.ruc,205,185),a.text(e.result.direccion,205,200),a.text(e.result.estado,205,215),a.text(e.result.condicion,205,230),a.text(e.result.telefono,205,245),a.text(e.result.representate_legal,205,260),a.text(e.result.otro,205,275),a.line(195,155,195,280),a.line(85,173,755,173),a.line(85,188,755,188),a.line(85,203,755,203),a.line(85,218,755,218),a.line(85,233,755,233),a.line(85,248,755,248),a.line(85,263,755,263),a.rect(85,155,670,125);var n="consulta_ruc_"+r+".pdf";a.save(n)},e.limpiarConsulta=function(){e.searching=!1,e.haveResult=!1,e.loading=!1,e.ruc="",e.result={},e.limpiarAlertas()},e.result={},e.searching=!1,e.haveResult=!1,e.loading=!1,e.showFlag=!1,e.wsWorks=!1,e.wsWorksMessage="El servicio no se encuentra habilitado por ahora",r.registrarFuncionesManejoAlertas(e),e.limpiarAlertas(),e.changeViewTitle("Consulta Ruc"),s()}app.controller("ConsRucCtrl",["$scope","Auth","ValidatorUtil","FunctionUtil","ConsultasService","WebservicesService",ConsRucCtrl]);
"use strict";function ConsTitularidadCtrl(e,a,t,o,l,i,r,n,s){t.elegirTipoParticipante=function(){"J"===t.tipo?(t.nombre="",t.apPaterno="",t.apMaterno=""):"N"===t.tipo?t.razonSocial="":(t.nombre="",t.apPaterno="",t.apMaterno="",t.razonSocial="")},t.consultarTitularidad=function(){t.limpiarAlertas(),t.loading=!0,t.searching=!1,t.haveResult=!1,i.isValidValue(t.nombre)&&i.isValidValue(t.apPaterno)&&i.isValidValue(t.apMaterno)&&i.isValidValue(t.razonSocial)?n.getTitularidad(t.tipo,t.nombre,t.apPaterno,t.apMaterno,t.razonSocial).then(function(e){t.loading=!1,1==e.data.status?(t.searching=!0,t.results=e.data.data,t.haveResult=0!==t.results.length,t.haveResult?(t.currentPage=1,t.getDataInPage(),t.addInfoAlert("Se encontraron "+t.results.length+" resultado(s)",!1)):t.addWarningAlert("No se encontraron resultados",!1)):(t.searching=!1,t.haveResult=!1,t.addErrorAlert("Hubo un error en el resultado de la consulta.",!1))}).catch(function(e){t.loading=!1,t.searching=!1,t.haveResult=!1,t.addErrorAlert("Error al realizar la consulta.",!1)}):(t.loading=!1,t.searching=!1,i.isValidValue(t.nombre)||t.addErrorAlert("Nombre ingresado no válido",!1),i.isValidValue(t.apPaterno)||t.addErrorAlert("Apellido Paterno igresado no válido",!1),i.isValidValue(t.apMaterno)||t.addErrorAlert("Apellido Materno ingresado no válido",!1),i.isValidValue(t.razonSocial)||t.addErrorAlert("Razón Social ingresada no válida",!1))},t.verDetalleTitularidad=function(e){t.ocultarResultadosTitularidad(),t.consultarDetalleTitularidad(e.oficina,e.nro_partida,e.registro)},t.$watch("currentPage + numPerPage",function(){t.getDataInPage()}),t.getDataInPage=function(){var e=(t.currentPage-1)*t.numPerPage,a=e+t.numPerPage;t.filterResults=t.results.slice(e,a)};var d=function(){s.verificarWsTitularidad().then(function(e){console.log(e.data),t.showFlag=!0,1===e.data.status?(t.wsWorks=e.data.data,t.wsWorksMessage=e.data.message):t.wsWorks=!1}).catch(function(e){t.showFlag=!0,t.wsWorks=!1})};t.exportPdf=function(){var e=new jsPDF("l","pt","a4"),a=(new Date).toLocaleString(),l=15,i=[],r=[{title:"Registro",key:"registro"},{title:"Libro",key:"libro"},{title:"Nro de partida",key:"partida"},{title:"Estado",key:"estado"},{title:"Zona",key:"zona"},{title:"Oficina",key:"oficina"},{title:"Dirección",key:"direccion"},{title:"Tipo de Documento",key:"tipodoc"},{title:"Documento",key:"doc"},{title:"Placa",key:"placa"}];e.setFontSize(12),e.setFontType("bold"),e.text("CONSULTA DE TITULARIDAD DE DOMINIO - PIDE+",290,55,null,null,"center"),e.setFontSize(11),e.setFontType("normal"),e.text("Tipo de Representante: ",60,90),"N"===t.tipo?(e.text("Natural",225,90),e.text("Nombres: ",60,105),e.text(t.nombre,225,105),e.text("Apellido Paterno: ",60,120),e.text(t.apPaterno,225,120),e.text("Apellido Materno: ",60,135),e.text(t.apMaterno,225,135),l+=30):"J"===t.tipo&&(e.text("Juridica",225,90),e.text("Razon Social: ",60,105),e.text(t.razonSocial,225,105)),e.text("Fecha de exportacion: ",60,105+l),e.text(a,225,105+l),e.text("Usuario: ",60,120+l),e.text(o.user.username,225,120+l),e.setFontSize(12),e.setFontType("italic"),e.text("RESULTADOS:",60,155+l),e.setFontType("normal"),angular.forEach(t.results,function(e){console.log(e);var a={registro:e.registro,libro:e.libro?e.libro:"",partida:e.nro_partida,estado:e.estado,zona:e.zona,oficina:e.oficina,direccion:e.direccion?e.direccion:"",tipodoc:e.tipo_doc?e.tipo_doc:"",doc:e.nro_doc?e.nro_doc:"",placa:e.nro_placa?e.nro_placa:""};i.push(a)});var n=1,s=i.length;if(i.length>16){var d=i.slice(0,16);e.autoTable(r,d,{margins:{horizontal:60,top:175+l,firstPageTop:175+l},fontSize:6,bodyStyles:{valign:"middle"},styles:{overflow:"visible",columnWidth:"auto"},columnStyles:{registro:{columnWdth:"auto",overflow:"visible"},libro:{columnWdth:"auto",overflow:"visible"},partida:{columnWdth:"auto",overflow:"visible"},estado:{columnWdth:"auto",overflow:"visible"},zona:{columnWdth:"auto",overflow:"visible"},oficina:{columnWdth:"auto",overflow:"visible"},direccion:{columnWdth:"auto",overflow:"visible"},tipodoc:{columnWdth:"auto",overflow:"visible"},doc:{columnWdth:"auto",overflow:"visible"},placa:{columnWdth:"auto",overflow:"visible"}}});var u=Math.floor((s-16)/26)+1;if(0!=u)for(;n-1<u;){var c=26*(n-1)+16,g=c+26;g<s&&n>=u&&(g=s),e.addPage();var p=i.slice(c,g);e.autoTable(r,p,{margins:{horizontal:60,top:20,firstPageTop:20},fontSize:8,bodyStyles:{valign:"middle"},styles:{overflow:"visible",columnWidth:"auto"},columnStyles:{registro:{columnWdth:"auto",overflow:"visible"},libro:{columnWdth:"auto",overflow:"visible"},partida:{columnWdth:"auto",overflow:"visible"},estado:{columnWdth:"auto",overflow:"visible"},zona:{columnWdth:"auto",overflow:"visible"},oficina:{columnWdth:"auto",overflow:"visible"},direccion:{columnWdth:"auto",overflow:"visible"},tipodoc:{columnWdth:"auto",overflow:"visible"},doc:{columnWdth:"auto",overflow:"visible"},placa:{columnWdth:"auto",overflow:"visible"}}}),n++}}else e.autoTable(r,i,{margins:{horizontal:60,top:175+l,firstPageTop:175+l},fontSize:8,bodyStyles:{valign:"middle"},styles:{overflow:"visible",columnWidth:"auto"},columnStyles:{registro:{columnWdth:"auto",overflow:"visible"},libro:{columnWdth:"auto",overflow:"visible"},partida:{columnWdth:"auto",overflow:"visible"},estado:{columnWdth:"auto",overflow:"visible"},zona:{columnWdth:"auto",overflow:"visible"},oficina:{columnWdth:"auto",overflow:"visible"},direccion:{columnWdth:"auto",overflow:"visible"},tipodoc:{columnWdth:"auto",overflow:"visible"},doc:{columnWdth:"auto",overflow:"visible"},placa:{columnWdth:"auto",overflow:"visible"}}});var v="consulta_titularidad_"+a+".pdf";e.save(v)},t.limpiarConsulta=function(){t.searching=!1,t.haveResult=!1,t.loading=!1,t.tipo="0",t.nombre="",t.apPaterno="",t.apMaterno="",t.razonSocial="",t.results=[],t.filterResults=[],t.limpiarAlertas()},t.ocultarResultadosTitularidad=function(){t.showDetalle=!0},t.volverListado=function(){t.limpiarAlertas(),t.showDetalle=!1,t.searchingDetalle=!1,t.haveResultDetalle=!1,t.loadingDetalle=!1,t.loadingImage=!1,t.resultDetalle={},t.partidaDetalle="",t.oficinaDetalle="",t.registroDetalle=""},t.consultarDetalleTitularidad=function(e,a,o){t.limpiarAlertas(),t.partidaDetalle=a,t.oficinaDetalle=e,t.registroDetalle=o;var i=l.obtenerOficinaYZona(e),r=i.zona,s=i.oficina,d=l.obtenerRegistro(o);n.getDetalleTitularidad(r,s,a,d).then(function(e){if(t.loadingDetalle=!1,1==e.data.status){t.searchingDetalle=!0;var a=e.data.data;0!==a.length?(t.resultDetalle=a[0],null!=t.resultDetalle.total_pag?(t.addInfoAlert("Se encontraron resultados.",!1),t.haveResultDetalle=!0):(t.addWarningAlert("No se encontraron resultados",!1),t.haveResultDetalle=!1)):(t.addWarningAlert("No se encontraron resultados",!1),t.haveResultDetalle=!1)}else t.searchingDetalle=!1,t.haveResultDetalle=!1,t.addErrorAlert("Hubo un error en el resultado de la consulta.",!1)}).catch(function(e){t.loadingDetalle=!1,t.searchingDetalle=!1,t.haveResultDetalle=!1,t.addErrorAlert("Error al realizar la consulta.",!1)})},t.consultarVigenciaPoder=function(e){t.loadingImage=!0,n.getVigencia(t.resultDetalle.transaccion,e.id_img,e.tipo,t.resultDetalle.total_pag,e.pag_ref,e.nro_pag).then(function(e){t.loadingImage=!1,1==e.data.status?(t.resultImage=e.data.data,""!==t.resultImage?t.showVigenciaPoderModal(t.resultImage):t.addWarningAlert("No posee una vigencia de poder",!1)):t.addErrorAlert("Hubo un error en el resultado de la consulta.",!1)}).catch(function(e){t.loadingImage=!1,t.addErrorAlert("Error al realizar la consulta.",!1)})},t.showVigenciaPoderModal=function(a){e.open({animation:!0,templateUrl:"vigenciaPoder.html",controller:["$scope","$uibModalInstance",function(e,t){e.urlVigenciaPoder="data:image/JPEG;base64,"+a,e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}]})},t.exportDetallePdf=function(){var e=new jsPDF("p","pt","a4"),a=(new Date).toLocaleString(),l=[];e.setFontSize(12),e.setFontType("bold"),e.text("CONSULTA DE LISTA DE ASIENTOS - PIDE+",198,55,null,null,"center"),e.setFontSize(11),e.setFontType("normal"),e.text("Fecha de exportacion: ",60,90),e.text(a,225,90),e.text("Usuario: ",60,105),e.text(o.user.username,225,105),e.setFontSize(12),e.setFontType("italic"),e.text("RESULTADO:",60,130),e.setFontSize(10),e.setFontType("normal"),e.text("Nro Transaccion:",60,155),e.text("Total de paginas:",410,155),e.setFontSize(9),e.setFontType("normal"),e.text(t.resultDetalle.transaccion,205,155),e.text(t.resultDetalle.total_pag,525,155),angular.forEach(t.resultDetalle.asientos,function(e){var a={imagenid:e.id_img,pagina:e.nro_pag,tipo:e.tipo,referencia:e.pag_ref};l.push(a)}),e.autoTable([{title:"ID Imagen",key:"imagenid"},{title:"Nro de pagina",key:"pagina"},{title:"Tipo",key:"tipo"},{title:"Pagina de referencia",key:"referencia"}],l,{margins:{horizontal:60,top:175,firstPageTop:174},fontSize:8});var i="consulta_detalle_titulo_partida"+t.partidaDetalle+"_oficina"+t.oficinaDetalle+"_registro"+t.registroDetalle+"_"+a+".pdf";e.save(i)},t.results=[],t.filterResults=[],t.searching=!1,t.haveResult=!1,t.loading=!1,t.showFlag=!1,t.wsWorks=!1,t.wsWorksMessage="El servicio no se encuentra habilitado por ahora",t.currentPage=1,t.numPerPage=10,t.maxSize=5,t.tipo="0",t.nombre="",t.apPaterno="",t.apMaterno="",t.razonSocial="",t.showDetalle=!1,t.resultDetalle={},t.resultImage="http://english.tw/wp-content/themes/qaengine/img/default-thumbnail.jpg",t.searchingDetalle=!1,t.haveResultDetalle=!1,t.loadingDetalle=!1,t.loadingImage=!1,t.partidaDetalle="",t.oficinaDetalle="",t.registroDetalle="",r.registrarFuncionesManejoAlertas(t),t.limpiarAlertas(),t.changeViewTitle("Consulta Titularidad"),d()}app.controller("ConsTitularidadCtrl",["$uibModal","$state","$scope","Auth","GetDetalleTitularidadDatosUtil","ValidatorUtil","FunctionUtil","ConsultasService","WebservicesService",ConsTitularidadCtrl]);
"use strict";function DashboardCtrl(r,a){a.registrarFuncionesManejoAlertas(r),r.limpiarAlertas(),r.changeViewTitle("Inicio")}app.controller("DashboardCtrl",["$scope","FunctionUtil",DashboardCtrl]);
function LoginCtrl(a,e,o,t,r){a.appTitle="Home",a.loading=!1;routingConfig.accessLevels,routingConfig.userRoles;a.alerts=[],a.login=function(){a.limpiarAlertas(),a.loading=!0,o.callLogin(a.formData.user,a.formData.password).then(function(e){if(a.loading=!1,1==e.data.status){r.setCookieRest(e.data.data.authToken);var t=o.generateRoleFromTipo(""),s=e.data.data.opciones;a.user={username:e.data.data.username,role:t,opciones:s},o.changeUser(a.user),n(s)}}).catch(function(e){a.loading=!1,a.formData.password="",null!=e.data?a.addErrorAlert(e.data.Message):a.addErrorAlert("No tiene conexión al servidor.")})},a.addErrorAlert=function(e){a.alerts=[],a.alerts.push({type:"danger",msg:e})},a.closeErrorAlert=function(e){a.alerts.splice(e,1)},a.limpiarAlertas=function(){a.alerts=[]};var n=function(e){r.setCookieViews(e),a.evaluateWidth(a.getWidth(),!0),t.go("common.dashboard")};a.showForgotPasswordModal=function(){e.open({animation:!0,templateUrl:"recoveryPass.html",controller:["$scope","$uibModalInstance",function(a,e){a.formData={userRecovery:""},a.ok=function(){e.close(a.formData.userRecovery)},a.cancel=function(){e.dismiss("cancel")}}],size:"sm"}).result.then(function(e){a.recoveryPass(e)},function(){})},a.recoveryPass=function(a){o.callRecoveryPassword(a).then(function(a){a.data.status}).catch(function(a){alert(a.data.Message)})}}app.controller("LoginCtrl",["$scope","$uibModal","Auth","$state","TokenRestManager",LoginCtrl]);
"use strict";function MasterCtrl(e,t,o,i,n,g,l){e.user=o.user,e.userRoles=routingConfig.userRoles,e.accessLevels=routingConfig.accessLevels;e.getWidth=function(){return window.innerWidth},e.evaluateWidth=function(i,n){o.isLoggedIn()?(a(t.views),void 0==n&&(n=!1),i>=992?angular.isDefined(t.toggle)?e.toggle=0!=n||!!t.toggle:e.toggle=!0:e.toggle=!1):e.toggle=!1};var a=function(t){e.consultas=[],e.auditoria=[],angular.forEach(t,function(t){var o=l.obteneOpcion(t);"CON"===o.opcion&&e.consultas.push(o),"LOG"===o.opcion&&e.auditoria.push(o)})};e.$watch(e.getWidth,function(t,o){e.evaluateWidth(t)}),e.toggleSidebar=function(){var o=e.toggle;e.toggle=!o,t.toggle=e.toggle},window.onresize=function(){e.$apply()},e.changeViewTitle=function(t){e.appTitle=t},e.logout=function(){o.callLogout(),e.evaluateWidth(e.getWidth()),e.toggle=!1,o.changeUser({username:"",role:e.userRoles.public}),i.path("/")},e.changeViewTitle("Inicio")}app.controller("MasterCtrl",["$scope","$sessionStorage","Auth","$location","$state","$timeout","GetOpcionesMenuUtil",MasterCtrl]);